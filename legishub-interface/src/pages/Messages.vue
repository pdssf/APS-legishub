<template>
<v-main>
    <v-app-bar color="green">{{ firstName }}</v-app-bar>
    <div v-for="(message, index) in messages" :key="index" class="messages-container">
    <message-card :messageProp="message"/>
    </div>
    <bottom-bar @send-message="addMessage($event)"/>
</v-main>
</template>

<script>
import MessageCard from '../components/MessageCard.vue'
import BottomBar from '../components/BottomBar.vue'
// import { firestore } from '../config/firebase.js'
export default {
  components: {
    MessageCard,
    BottomBar
  },
  data() {
    return {
      messages: []
    }
  },
  computed: {
    firstName() {
      const user = this.$store.state.users.users.find(u => u.id === parseInt(this.$route.params.id))
      return user.name
    }
  },
  methods: {
    addMessage(event) {
      const newMessage = {
        login: this.$store.state.users.loggedUser?.email || 'email',
        numeroCnj: event.numeroCnj,
        arquivo: "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",
      }
      console.log(">>>>>>>>>>>>>>>> newMessage <<<<<<<<<<<<<<<<", newMessage)

      this.$store.dispatch('chat/sendMessage', newMessage)
    }
  }, 
  created() {
  }
}
</script>

<style>

</style>